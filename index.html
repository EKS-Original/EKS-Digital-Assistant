<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrical Pro - Mobile Suite</title>
    <style>
        :root { --primary: #f1c40f; --dark: #121212; --card: #1e1e1e; --text: #eee; --blue: #3498db; --red: #e74c3c; }
        
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: var(--text); margin: 0; padding-bottom: 80px; }

        /* Header */
        .header { background: #000; padding: 15px; text-align: center; border-bottom: 3px solid var(--primary); }

        /* Mobile Navigation - Scrollable & No Overlap */
        .nav-container {
            background: #222;
            position: sticky;
            top: 0;
            z-index: 1000;
            overflow-x: auto; /* ·Äñ·ÄØ·Äî·Ä∫·Ä∏·Äô·Äæ·Ä¨ ·Äò·Ä±·Ä∏·Äê·Ä≠·ÄØ·ÄÄ·Ä∫·Äõ·ÄΩ·Äæ·Ä±·Ä∑·Äú·Ä≠·ÄØ·Ä∑·Äõ·Ä°·Ä±·Ä¨·ÄÑ·Ä∫ */
            white-space: nowrap; /* ·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·Äê·ÄΩ·Ä±·ÄÄ·Ä≠·ÄØ ·Äê·ÄÖ·Ä∫·ÄÄ·Äº·Ä±·Ä¨·ÄÑ·Ä∫·Ä∏·Äê·Ää·Ä∫·Ä∏·Äñ·Äº·ÄÖ·Ä∫·Ä°·Ä±·Ä¨·ÄÑ·Ä∫ */
            -webkit-overflow-scrolling: touch;
            border-bottom: 1px solid #444;
        }

        .nav-container::-webkit-scrollbar { display: none; } /* Scrollbar ·Äñ·Äª·Ä±·Ä¨·ÄÄ·Ä∫·Äë·Ä¨·Ä∏·Äô·Äö·Ä∫ */

        .nav-container button {
            display: inline-block;
            padding: 15px 20px;
            border: none;
            background: none;
            color: #bbb;
            cursor: pointer;
            font-size: 14px;
            font-weight: bold;
            transition: 0.3s;
        }

        .nav-container button.active {
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }

        .container { padding: 15px; max-width: 800px; margin: auto; }

        /* Card Designs */
        .card { background: var(--card); padding: 18px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }
        
        input, textarea, select { 
            width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; 
            border: 1px solid #444; background: #2c3e50; color: white; box-sizing: border-box; 
        }

        .btn { background: var(--primary); color: black; border: none; padding: 15px; border-radius: 8px; font-weight: bold; width: 100%; margin-top: 5px; }

        .list-item { background: #2c3e50; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 5px solid var(--primary); position: relative; }
        .delete-btn { position: absolute; right: 10px; top: 10px; color: var(--red); font-size: 20px; font-weight: bold; cursor: pointer; }

        /* Table Styling */
        .table-responsive { overflow-x: auto; }
        table { width: 100%; border-collapse: collapse; margin-top: 10px; min-width: 300px; }
        th, td { border: 1px solid #444; padding: 12px 8px; text-align: center; font-size: 14px; }
        th { background: #333; color: var(--primary); }

        .hidden { display: none; }
        .total-box { font-size: 18px; text-align: right; color: var(--primary); margin-top: 10px; font-weight: bold; }
        .search-mini { background: #121212; border: 1px solid var(--primary); margin-bottom: 10px; }
    </style>
</head>
<body>

<div class="header"><h2>ELECTRICAL PRO</h2></div>

<div class="nav-container">
    <button id="b1" class="active" onclick="showTab('daily')">Daily Logs</button>
    <button id="b2" onclick="showTab('schedule')">Schedules</button>
    <button id="b3" onclick="showTab('inventory')">Budgeting</button>
    <button id="b4" onclick="showTab('calc')">Calculator</button>
    <button id="b5" onclick="showTab('ref')">Cable Ref</button>
</div>

<div class="container">
    <div id="daily">
        <h3>üìù Daily Logs</h3>
        <div class="card">
            <input type="text" id="logTitle" placeholder="Work Title (e.g. DB Dressing)">
            <textarea id="logDetail" placeholder="Details..."></textarea>
            <button class="btn" onclick="saveData('logs', ['logTitle', 'logDetail'])">Save Log</button>
        </div>
        <div id="logList"></div>
    </div>

    <div id="schedule" class="hidden">
        <h3>üìÖ Planning</h3>
        <div class="card">
            <input type="date" id="planDate">
            <input type="text" id="planTask" placeholder="Task to do">
            <button class="btn" onclick="saveData('plans', ['planDate', 'planTask'])">Add Plan</button>
        </div>
        <div id="planList"></div>
    </div>

    <div id="inventory" class="hidden">
        <h3>üí∞ Budget & Materials</h3>
        <div class="card">
            <input type="text" id="matName" placeholder="Item Name">
            <input type="number" id="matQty" placeholder="Quantity">
            <input type="number" id="matPrice" placeholder="Price per unit">
            <button class="btn" onclick="saveData('mats', ['matName', 'matQty', 'matPrice'])">Update Budget</button>
            <div class="total-box">Total: <span id="grandTotal">0</span> Ks</div>
        </div>
        <div id="matList"></div>
    </div>

    <div id="calc" class="hidden">
        <h3>‚ö° Quick Calc (230V)</h3>
        <div class="card">
            <input type="number" id="watts" placeholder="Enter Watts (W)" oninput="document.getElementById('resA').innerText = (this.value/230).toFixed(2)">
            <p style="text-align:center; font-size: 20px;">Current: <b id="resA" style="color:var(--primary)">0</b> Amps</p>
        </div>
    </div>

    <div id="ref" class="hidden">
        <h3>üìö Cable Ampacity</h3>
        <input type="text" id="cableSearch" class="search-mini" placeholder="Size ·Äõ·Äæ·Ä¨·Äõ·Äî·Ä∫... (e.g. 10)" oninput="filterCable()">
        <div class="table-responsive">
            <table id="cableTableMain">
                <thead>
                    <tr><th>Size (mm¬≤)</th><th>1 Core (A)</th><th>Multi (A)</th></tr>
                </thead>
                <tbody id="cableTableBody"></tbody>
            </table>
        </div>
    </div>
</div>

<script>
    function showTab(id) {
        ['daily', 'schedule', 'inventory', 'calc', 'ref'].forEach(t => document.getElementById(t).classList.add('hidden'));
        document.querySelectorAll('.nav-container button').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.remove('hidden');
        event.currentTarget.classList.add('active');
        renderAll();
    }

    function saveData(key, inputs) {
        let data = JSON.parse(localStorage.getItem(key) || '[]');
        let entry = { id: Date.now(), time: new Date().toLocaleDateString() };
        inputs.forEach(id => { entry[id] = document.getElementById(id).value; document.getElementById(id).value = ''; });
        data.unshift(entry);
        localStorage.setItem(key, JSON.stringify(data));
        renderAll();
    }

    function deleteItem(key, id) {
        if(confirm("·Äñ·Äª·ÄÄ·Ä∫·Äõ·Äî·Ä∫ ·Äû·Ä±·ÄÅ·Äª·Ä¨·Äï·Ä´·Äû·Äú·Ä¨·Ä∏?")) {
            let data = JSON.parse(localStorage.getItem(key)).filter(i => i.id !== id);
            localStorage.setItem(key, JSON.stringify(data));
            renderAll();
        }
    }

    function renderAll() {
        document.getElementById('logList').innerHTML = JSON.parse(localStorage.getItem('logs') || '[]').map(l => `
            <div class="list-item"><span class="delete-btn" onclick="deleteItem('logs', ${l.id})">√ó</span><b>${l.logTitle}</b><br><small>${l.time}</small><p>${l.logDetail}</p></div>`).join('');
        
        document.getElementById('planList').innerHTML = JSON.parse(localStorage.getItem('plans') || '[]').map(p => `
            <div class="list-item"><span class="delete-btn" onclick="deleteItem('plans', ${p.id})">√ó</span>üìÖ <b>${p.planDate}</b>: ${p.planTask}</div>`).join('');

        let total = 0;
        document.getElementById('matList').innerHTML = JSON.parse(localStorage.getItem('mats') || '[]').map(m => {
            let sub = Number(m.matQty) * Number(m.matPrice);
            total += sub;
            return `<div class="list-item"><span class="delete-btn" onclick="deleteItem('mats', ${m.id})">√ó</span>üì¶ <b>${m.matName}</b>: ${m.matQty} x ${m.matPrice} = <b>${sub.toLocaleString()}</b> Ks</div>`;
        }).join('');
        document.getElementById('grandTotal').innerText = total.toLocaleString();
    }

    const cableData = [
        ["1.5", 17.5, 15.5], ["2.5", 24, 21], ["4", 32, 28], ["6", 41, 36], ["10", 57, 50],
        ["16", 76, 68], ["25", 101, 89], ["35", 125, 110], ["50", 151, 134], ["70", 192, 171],
        ["95", 232, 207], ["120", 269, 239], ["150", 309, 275], ["185", 353, 314], ["240", 415, 370]
    ];

    function loadCableData(filter = "") {
        document.getElementById('cableTableBody').innerHTML = cableData
            .filter(c => c[0].includes(filter))
            .map(c => `<tr><td>${c[0]}</td><td>${c[1]}</td><td>${c[2]}</td></tr>`).join('');
    }

    function filterCable() {
        loadCableData(document.getElementById('cableSearch').value);
    }

    window.onload = () => { loadCableData(); renderAll(); };
</script>
</body>
</html>
