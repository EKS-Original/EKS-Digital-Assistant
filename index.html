<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electrical Pro Work Suite</title>
    <style>
        :root { --primary: #f1c40f; --dark: #121212; --card: #1e1e1e; --text: #eee; --blue: #3498db; --red: #e74c3c; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--dark); color: var(--text); margin: 0; padding-bottom: 80px; }
        .header { background: #000; padding: 15px; text-align: center; border-bottom: 3px solid var(--primary); }
        .nav { display: flex; overflow-x: auto; background: #222; position: sticky; top: 0; z-index: 100; border-bottom: 1px solid #444; }
        .nav button { flex: 1; padding: 15px; border: none; background: none; color: white; cursor: pointer; min-width: 90px; font-size: 13px; white-space: nowrap; }
        .nav button.active { border-bottom: 3px solid var(--primary); color: var(--primary); font-weight: bold; }
        .container { padding: 15px; max-width: 800px; margin: auto; }
        .card { background: var(--card); padding: 20px; border-radius: 12px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        input, textarea, select { width: 100%; padding: 12px; margin: 8px 0; border-radius: 8px; border: 1px solid #444; background: #2c3e50; color: white; box-sizing: border-box; }
        .btn { background: var(--primary); color: black; border: none; padding: 15px; border-radius: 8px; font-weight: bold; cursor: pointer; width: 100%; margin-top: 10px; transition: 0.3s; }
        .btn-blue { background: var(--blue); color: white; }
        .list-item { background: #2c3e50; padding: 15px; border-radius: 8px; margin-bottom: 10px; border-left: 5px solid var(--primary); position: relative; }
        .priority-high { border-left-color: var(--red); }
        .delete-btn { position: absolute; right: 10px; top: 10px; color: var(--red); cursor: pointer; font-size: 18px; }
        .hidden { display: none; }
        .total-box { font-size: 20px; text-align: right; color: var(--primary); margin-top: 10px; }
    </style>
</head>
<body>

<div class="header"><h2>ELECTRICAL PRO WORK SUITE</h2></div>

<div class="nav">
    <button id="b1" class="active" onclick="showTab('daily')">Daily Logs</button>
    <button id="b2" onclick="showTab('schedule')">Schedules</button>
    <button id="b3" onclick="showTab('inventory')">Materials/Budget</button>
    <button id="b4" onclick="showTab('calc')">Calculators</button>
    <button id="b5" onclick="showTab('ref')">Quick Ref</button>
</div>

<div class="container">
    
    <div id="daily">
        <h3>üë∑ ·Äî·Ä±·Ä∑·ÄÖ·Äâ·Ä∫ ·Äú·ÄØ·Äï·Ä∫·ÄÑ·Äî·Ä∫·Ä∏·Äô·Äæ·Äê·Ä∫·Äê·Äô·Ä∫·Ä∏</h3>
        <div class="card">
            <input type="text" id="logTitle" placeholder="Project ·Ä°·Äô·Ää·Ä∫">
            <textarea id="logDetail" placeholder="·Äò·Ä¨·Äê·ÄΩ·Ä±·Äú·ÄØ·Äï·Ä∫·ÄÅ·Ä≤·Ä∑·Äú·Ä≤ (Faults, Inspections)..."></textarea>
            <button class="btn" onclick="saveData('logs', ['logTitle', 'logDetail'])">Add Log Record</button>
        </div>
        <div id="logList"></div>
    </div>

    <div id="schedule" class="hidden">
        <h3>üìÖ ·Ä°·Äú·ÄØ·Äï·Ä∫·Ä°·ÄÖ·ÄÆ·Ä°·ÄÖ·Äâ·Ä∫ ·ÄÜ·ÄΩ·Ä≤·Äõ·Äî·Ä∫</h3>
        <div class="card">
            <input type="date" id="planDate">
            <input type="text" id="planTask" placeholder="·Äú·ÄØ·Äï·Ä∫·ÄÜ·Ä±·Ä¨·ÄÑ·Ä∫·Äõ·Äô·Ää·Ä∑·Ä∫·Ä°·Äú·ÄØ·Äï·Ä∫">
            <select id="priority">
                <option value="Normal">Normal Priority</option>
                <option value="High">High Priority (Urgent)</option>
            </select>
            <button class="btn" onclick="saveData('plans', ['planDate', 'planTask', 'priority'])">Add to Schedule</button>
        </div>
        <div id="planList"></div>
    </div>

    <div id="inventory" class="hidden">
        <h3>üí∞ ·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·ÄÖ·Ä¨·Äõ·ÄÑ·Ä∫·Ä∏·Äî·Äæ·ÄÑ·Ä∑·Ä∫ ·ÄÄ·ÄØ·Äî·Ä∫·ÄÄ·Äª·ÄÖ·Äõ·Ä≠·Äê·Ä∫</h3>
        <div class="card">
            <input type="text" id="matName" placeholder="·Äï·ÄÖ·Äπ·ÄÖ·Ää·Ä∫·Ä∏·Ä°·Äô·Ää·Ä∫">
            <input type="number" id="matQty" placeholder="·Ä°·Äõ·Ä±·Ä°·Äê·ÄΩ·ÄÄ·Ä∫">
            <input type="number" id="matPrice" placeholder="·Äê·ÄÖ·Ä∫·ÄÅ·ÄØ·ÄÅ·Äª·ÄÑ·Ä∫·Ä∏·Äà·Ä±·Ä∏ (Unit Price)">
            <button class="btn" onclick="saveData('mats', ['matName', 'matQty', 'matPrice'])">Save to Budget</button>
            <div class="total-box">·ÄÖ·ÄØ·ÄÖ·ÄØ·Äï·Ä±·Ä´·ÄÑ·Ä∫·Ä∏: <span id="grandTotal">0</span> ·ÄÄ·Äª·Äï·Ä∫</div>
        </div>
        <div id="matList"></div>
    </div>

    <div id="calc" class="hidden">
        <h3>‚ö° Electrical Calculators</h3>
        <div class="card">
            <h4>Watts to Amps (1 Phase)</h4>
            <input type="number" id="watts" placeholder="Power (Watts)" oninput="calcBasic()">
            <p>Result: <b id="resAmps" style="color:var(--primary)">0</b> A</p>
        </div>
        <div class="card">
            <h4>Voltage Drop Estimator</h4>
            <input type="number" id="dist" placeholder="Distance (Meters)" oninput="calcVD()">
            <input type="number" id="load" placeholder="Load (Amps)" oninput="calcVD()">
            <p>Est. Drop: <b id="resVD" style="color:var(--primary)">0</b> Volts</p>
        </div>
    </div>

    <div id="ref" class="hidden">
        <h3>üìö Quick Reference Data</h3>
        <div class="card">
            <h4>Cable Current Carrying Capacity (Cu/PVC)</h4>
            <table style="width:100%; text-align:left; font-size:14px;">
                <tr style="color:var(--primary)"><th>Size (mm¬≤)</th><th>Max Amps (Approx)</th></tr>
                <tr><td>1.5</td><td>14 - 16 A</td></tr>
                <tr><td>2.5</td><td>20 - 25 A</td></tr>
                <tr><td>4.0</td><td>28 - 32 A</td></tr>
                <tr><td>6.0</td><td>36 - 42 A</td></tr>
                <tr><td>10.0</td><td>50 - 55 A</td></tr>
            </table>
        </div>
    </div>

</div>

<script>
    function showTab(id) {
        ['daily', 'schedule', 'inventory', 'calc', 'ref'].forEach(t => document.getElementById(t).classList.add('hidden'));
        document.querySelectorAll('.nav button').forEach(b => b.classList.remove('active'));
        document.getElementById(id).classList.remove('hidden');
        event.currentTarget.classList.add('active');
        renderAll();
    }

    function saveData(key, inputs) {
        let data = JSON.parse(localStorage.getItem(key) || '[]');
        let entry = { id: Date.now(), timestamp: new Date().toLocaleDateString() };
        inputs.forEach(id => {
            entry[id] = document.getElementById(id).value;
            document.getElementById(id).value = ''; 
        });
        data.unshift(entry);
        localStorage.setItem(key, JSON.stringify(data));
        renderAll();
    }

    function deleteItem(key, id) {
        let data = JSON.parse(localStorage.getItem(key)).filter(i => i.id !== id);
        localStorage.setItem(key, JSON.stringify(data));
        renderAll();
    }

    function renderAll() {
        // Daily Logs
        document.getElementById('logList').innerHTML = JSON.parse(localStorage.getItem('logs') || '[]').map(l => `
            <div class="list-item">
                <span class="delete-btn" onclick="deleteItem('logs', ${l.id})">√ó</span>
                <b>${l.logTitle}</b> (${l.timestamp})<p>${l.logDetail}</p>
            </div>`).join('');

        // Schedules
        document.getElementById('planList').innerHTML = JSON.parse(localStorage.getItem('plans') || '[]').map(p => `
            <div class="list-item ${p.priority === 'High' ? 'priority-high' : ''}">
                <span class="delete-btn" onclick="deleteItem('plans', ${p.id})">√ó</span>
                üìÖ <b>${p.planDate}</b> - ${p.planTask} [${p.priority}]
            </div>`).join('');

        // Budget/Materials
        let total = 0;
        document.getElementById('matList').innerHTML = JSON.parse(localStorage.getItem('mats') || '[]').map(m => {
            let subtotal = Number(m.matQty) * Number(m.matPrice);
            total += subtotal;
            return `<div class="list-item">
                <span class="delete-btn" onclick="deleteItem('mats', ${m.id})">√ó</span>
                üì¶ <b>${m.matName}</b>: ${m.matQty} x ${m.matPrice} = <b>${subtotal.toLocaleString()}</b> ·ÄÄ·Äª·Äï·Ä∫
            </div>`;
        }).join('');
        document.getElementById('grandTotal').innerText = total.toLocaleString();
    }

    function calcBasic() {
        let w = document.getElementById('watts').value;
        document.getElementById('resAmps').innerText = (w / 230).toFixed(2);
    }

    function calcVD() {
        let d = document.getElementById('dist').value;
        let a = document.getElementById('load').value;
        // Formula: (2 * L * I * R) / 1000 - Simplified for estimation
        document.getElementById('resVD').innerText = ((2 * d * a * 0.019)).toFixed(2);
    }

    renderAll();
</script>
</body>
</html>
